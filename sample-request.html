<html>
<head>
    <title>Sample Request with PPID</title>
</head>
<body>
    <script src="./build/dev/prebid.js"></script>
    <script>
    // Define your ad unit configuration
    var adUnits = [{
        code: '/46753895/de-20minuten.ch/inside-full-content-pos1/ostschweiz', 
        mediaTypes: {
            banner: {
                sizes: [[300,50],[300,250],[300,600],[320,50],[320,480],[320,64],[320,160],[320,416],[336,280]]
            }
        },
        bids: [{
            bidder: 'goldlayer', 
            params: {
                publisherId: 'de-20minuten.ch',
                customTargeting: {
                    gpsenabled: "false",
                    fr: "false",
                    pagetype: "story",
                    darkmode: "false",
                    userloggedin: "false",
                    iosbuild: "24110",
                    language: "de",
                    storyId: "103211763",
                    connection: "wifi"
                }
            }
        }]
    }];

    // Set Prebid configurations with PPID (Publisher Provided Identifier) support
    pbjs.setConfig({
        debug: true,
        cache: {
            url: 'https://prebid.adnxs.com/pbc/v1/cache'
        },
        s2sConfig: {
            accountId: '1234',
            bidders: ['appnexus'],
            timeout: 1000,
            endpoint: 'https://prebid.adnxs.com/pbs/v1/openrtb2/auction',
        },
        ortb2: {
            device: {
                ifa: "ifa-111-222-333-444"
            }
        },
        timeout: 2000,
        userSync: {
            userIds: [{
             name: "pubProvidedId",
             params: {
                    eids: [{
                        source: "oneid.live",
                        uids: [{
                            id: "111222333444555666777888999",
                            atype: 1,
                            ext: {
                                stype: "ppuid"
                            }

                        }]
                    }, {
                        source: "goldbach.com",
                        uids: [{
                            id: "111222333444555222777888999",
                            atype: 1,
                            ext: {
                                stype: "ppuid"
                            }
                        }]
                    }]
                },
            }],
            auctionDelay: 50
        }
    });

    // Initialize ad units with Prebid
    pbjs.addAdUnits(adUnits);

    // Request bids
    pbjs.requestBids({
        bidsBackHandler: function(bidResponses) {
            console.log('Bid responses:', bidResponses);
            pbjs.setTargetingForGPTAsync();
        }
    });
    </script>
</body>
</html>
